<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" th:href="@{/css/base.css}">
    <link rel="stylesheet" th:href="@{/css/reset.css}">
    <link rel="stylesheet" th:href="@{/css/shop_type.css}">
    <link rel="stylesheet" th:href="@{/css/bootstrap.css}">
    <script th:src="@{/js/jquery-1.12.4.js}"></script>
    <script th:src="@{/js/bootstrap.js}"></script>
   	 <script type="text/javascript" th:src="@{/js/vue.js}"></script>
</head>
<body>
<div class="rightarea clearfix" id="lists" >
    <div class="mainarea clearfix">
        <div class="user_list_main clearfix">
            <div class="user_list_body clearfix" style="margin-bottom: 60px;">
	            <div class="searchArea">
	                <div class="btn-div">
	                    <a th:href="@{/topage/shop_upload}" class="btn btn-success" @click="insertStu()">
	                        添加类别
	                    </a>
	                </div>
	            </div>
                <div class="mainhead">
		            <span class="title">商品类型</span>
		        </div>
                <table class="clearfix settable">
                    <thead>
                        <tr>
                            <th width="20%">序号</th>
                            <th width="*">名称</th>
                            <th width="40%">操作</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr v-for="pages,index in page">
                            <td>{{pages.commoditytypeid}}</td>
                            <td>{{pages.commoditytypename}}</td>
                            <td>
                                <a href="javascript:;" @click="updateStu(pages.commoditytypeid)">修改</a>
                                <a href="javascript:;" @click="deleteStu(index,pages.commoditytypeid)">删除</a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>


<script type="text/javascript">
		var vm = new Vue({
			el:"#lists",
			 data: function () {
				    return {
				      page:[
				    	  
				      ]
				    }
			  },methods:{
				selectAll:function(i){//查询所有分页
					var this_=this;
					$.ajax({
						url:"[[@{/CommoditytypeController/selectAll}]]",
						type:"get",
						data:"",
						dataType:"json",
						success:function(res){
							console.info("分页数据")
							console.info(res)
							this_.page = res;
							console.info(this_.page)
						}	
					})
				},
				insertStu(){//跳转新增
					alert("新增")
					window.location.href="http://127.0.0.1:8080/StudentController/add";
				},
				updateStu(id){//跳转修改
					alert("修改")
					window.location.href="http://127.0.0.1:8080/StudentController/update?id="+id;
				},
				deleteStu(index,id){//删除
					var this_ = this;
					if (confirm("是否删除")==true) {
						$.ajax({
							url:"[[@{/StudentController/deleteByPrimaryKey}]]",
							type:"get",
							data:"id="+id,
							dataType:"json",
							success:function(res){
								alert(res.message);
								if(res.code == "1"){
									this_.page.list.splice(index, 1);//splice(index, 1) 删除从索引开始的一个元素
								}
							}
						})
					}
				},
				prePage: function() {//上一条
					if(this.page.hasPreviousPage) {
						this.selectAll(this.page.prePage);
					}
				},
				nextPage: function() {//下一条
					if(this.page.hasNextPage) {
						this.selectAll(this.page.nextPage);
					}
				},
			},created:function(){
				this.selectAll(1);
			}
		})
	</script>

<<<<<<< HEAD
  <!-- 自定义搜索条件区域 -->
         <div id="toolbar" class="btn-group" style="margin-top:15px">
            <input id="id" placeholder="请输入编号查询">
            <input id="name" placeholder="请输入姓名查询">
            <button id="search_btn">查询</button>
        </div>
        
         <!-- bootstrap table自动渲染区域 -->
		<table id="mytable" class="table table-hover" data-toolbar="#toolbar"></table>
		
        <script type="text/javascript">
            //初始化Table
                $('#mytable').bootstrapTable({
                	url: '/skmg/Skmg/getUserListPage',   //请求后台的URL（*）
                    method: 'get',                      //请求方式（*）
                    striped : true, 					//是否显示行间隔色
                    pageNumber:1,                       //初始化加载第一页，默认第一页
                	pagination : true,					//是否分页
                	sidePagination : 'client',			//server:服务器端分页|client：前端分页
                	pageSize :5,						//单页记录数
                	pageList : [ 5, 10, 20, 30 ],		//可选择单页记录数
                	showRefresh : true,					//刷新按钮                   
                    queryParams : function (params) {
                        var temp = {
                    		id:$('#id').val(),
                       		name:$('#name').val()
                        };
                        return temp;
                    },                    				//得到查询的参数
                	contentType: "application/x-www-form-urlencoded",//必须要有！！！！
                    toolbar: '#toolbar',                //工具按钮用哪个容器                
                    toolbarAlign:'left',				//工具栏对齐方式
                    buttonsAlign:'right',				//按钮对齐方式
                    cache: false,                       //是否使用缓存，默认为true，所以一般情况下需要设置一下这个属性（*）
                    sortable: false,                    //是否启用排序
                    sortOrder: "asc",                   //排序方式
                    search: false,                      //是否显示表格搜索，此搜索是客户端搜索，不会进服务端，所以，个人感觉意义不大
                    strictSearch: true,
                    showColumns: true,                  //是否显示所有的列
                    minimumCountColumns: 2,             //最少允许的列数
                    clickToSelect: true,                //是否启用点击选中行
                    //height: 500,                        //行高，如果没有设置height属性，表格自动根据记录条数觉得表格高度
                    uniqueId: "ID",                     //每一行的唯一标识，一般为主键列
                    showToggle:true,                    //是否显示详细视图和列表视图的切换按钮
                    cardView: false,                    //是否显示详细视图
                    detailView: false,                  //是否显示父子表
                    locale:'zh-CN',						//中文支持
                    columns : [{
                        title:'全选',
                        field:'state',
                        checkbox:true,
                        width:25,
                        align:'center',
                        valign:'middle'
                    },{  
 		        	   title : '供应商编码',
 		            	field : 'id',	        	    	
 		                sortable : true,
 		                
 		            }, {
 		            	title : '供应商名称',
 		            	field : 'name',	        	    	
 		                sortable : true,
 		            }, {      	   
 		            	title : '联系人',
         	    	 	field : 'contacts',	        	    	
 		                sortable : true,
 		                
 		            },  {      	   
 		            	title : '联系电话',
         	    	 	field : 'phone',	        	    	
 		                sortable : true,
 		                
 		            }, {      	   
 		            	title : '传真',
         	    	 	field : 'fax',	        	    	
 		                sortable : true,
 		                
 		            }, {      	   
 		        	    
         	    	 	field : 'address',
 	        	    	title : '联系地址',
 		                sortable : true,
 		                
 		            }, {      	   
 		        	    
         	    	 	field : 'creationtime',
 	        	    	title : '创建时间',
 		                sortable : true,
 		                
 		            }, {      	   
 		        	    
         	    	 	field : 'depict',
 	        	    	title : '描述',
 		                sortable : true,
 		                
 		            }, {
 						/* field:'id',
 						title: '操作',
 						width: 120,
 						align: 'center',
 						valign: 'middle',
 						formatter: actionFormatter */
 						field: 'operator',
 						title: '操作',
 						align: 'center',
 						valign: 'middle',
 						width: 120,
 						// visible: false,
 						formatter: function (value, row, index) {
 						    // var sid_code = base64encode(row.sid + '');   //  sid 加密处理
 						    // alert(sid_code);
 						    return '<a href="#">' + 
 						        '<i class="glyphicon glyphicon-eye-open" title="显示"></i> ' + 
 						        '</a>'+ 
 						        '<a href="#editProject" data-toggle="modal" title="修改">' + 
 						        '<i class="glyphicon glyphicon-pencil"></i> ' + 
 						        '</a>'+
 						        '<a href="javascript:void(0)" title="删除">' +
 						        '<i class="glyphicon glyphicon-trash text-danger"></i> ' + 
 						        '</a>';
 						},
 						events: {
 						  'click a[title=删除]': function (e, value, row, index) {
 							  console.info(e)
 							  console.info(value)
 							  console.info(row)
 							  console.info(index)
 							  alert(row.id)
 						      if(confirm('此操作不可逆，请确认是否删除？')==true){
 						    	 // 获取当前行 				              
 						    	 var id=row.id;
 						    	 $.ajax({
	 									url:"/skmg/Skmg/deleteByPid",
	 									type:"post",
	 									data:"id="+id,
	 									dataType:"json",						
	 									success:function(res){	
	 										console.info("删除：")
	 										console.info(res);
 											alert(res.message)
	 										$('#mytable').bootstrapTable('refresh');
	 									}
	 							}) 
 						      }
 						  },
 						  'click a[title=修改]': function (e, value, row, index) {
 						      // e.preventDefault();
 						      alert('click change button');
 						  },
 						}
 		            } ],
 		          
                });           
                         
                //查询按钮事件
                $('#search_btn').click(function() {
                	alert(11)
                	var id=$('#id').val();
               		var name=$('#name').val();
               		alert("id="+id+","+"name="+name+",")
                	$('#mytable').bootstrapTable('refresh', {
                		url : '/skmg/Skmg/getUserListPage'
                	});
                })
        </script>
=======
>>>>>>> refs/heads/lc
</body>
</html>