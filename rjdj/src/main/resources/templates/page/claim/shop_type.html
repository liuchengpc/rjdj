<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" th:href="@{/css/base.css}">
    <link rel="stylesheet" th:href="@{/css/reset.css}">
    <link rel="stylesheet" th:href="@{/css/shop_type.css}">
    <link rel="stylesheet" th:href="@{/css/bootstrap.css}">
    <script th:src="@{/js/jquery-1.12.4.js}"></script>
    <script th:src="@{/js/bootstrap.js}"></script>
   	 <script type="text/javascript" th:src="@{/js/vue.js}"></script>
</head>
<body>
<div class="rightarea clearfix" id="lists" >
    <div class="mainarea clearfix">
        <div class="user_list_main clearfix">
            <div class="user_list_body clearfix" style="margin-bottom: 60px;">
	            <div class="searchArea">
	                <div class="btn-div">
	                    <a th:href="@{/topage/shop_upload}" class="btn btn-success" @click="insertStu()">
	                        添加类别
	                    </a>
	                </div>
	            </div>
                <div class="mainhead">
		            <span class="title">商品类型</span>
		        </div>
                <table class="clearfix settable">
                    <thead>
                        <tr>
                            <th width="20%">序号</th>
                            <th width="*">名称</th>
                            <th width="40%">操作</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr v-for="pages,index in page">
                            <td>{{pages.commoditytypeid}}</td>
                            <td>{{pages.commoditytypename}}</td>
                            <td>
                                <a href="javascript:;" @click="updateStu(pages.commoditytypeid)">修改</a>
                                <a href="javascript:;" @click="deleteStu(index,pages.commoditytypeid)">删除</a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>


<script type="text/javascript">
		var vm = new Vue({
			el:"#lists",
			 data: function () {
				    return {
				      page:[
				    	  
				      ]
				    }
			  },methods:{
				selectAll:function(i){//查询所有分页
					var this_=this;
					$.ajax({
						url:"[[@{/CommoditytypeController/selectAll}]]",
						type:"get",
						data:"",
						dataType:"json",
						success:function(res){
							console.info("分页数据")
							console.info(res)
							this_.page = res;
							console.info(this_.page)
						}	
					})
				},
				insertStu(){//跳转新增
					alert("新增")
					window.location.href="http://127.0.0.1:8080/StudentController/add";
				},
				updateStu(id){//跳转修改
					alert("修改")
					window.location.href="http://127.0.0.1:8080/StudentController/update?id="+id;
				},
				deleteStu(index,id){//删除
					var this_ = this;
					if (confirm("是否删除")==true) {
						$.ajax({
							url:"[[@{/StudentController/deleteByPrimaryKey}]]",
							type:"get",
							data:"id="+id,
							dataType:"json",
							success:function(res){
								alert(res.message);
								if(res.code == "1"){
									this_.page.list.splice(index, 1);//splice(index, 1) 删除从索引开始的一个元素
								}
							}
						})
					}
				},
				prePage: function() {//上一条
					if(this.page.hasPreviousPage) {
						this.selectAll(this.page.prePage);
					}
				},
				nextPage: function() {//下一条
					if(this.page.hasNextPage) {
						this.selectAll(this.page.nextPage);
					}
				},
			},created:function(){
				this.selectAll(1);
			}
		})
	</script>

</body>
</html>